using System;
using System.Collections.Generic;
using System.Text;

namespace Statistics
{
    public class TScores
    {
        /// <summary>
        /// holds the t-score values for degrees of freedom 1-30, 
        /// and unceretainty probabilities: 0.4, 0.25, 0.1, 0.025, 0.01, 0.005, 0.0005
        /// </summary>
        private double[][] tableTScore = new double[][]
        {
            new double[]{0.4,0.25,0.1,0.025,0.01,0.005,0.0005},
            new double[]{0.324919696,1,3.077683537,12.70620474,31.82051595,63.65674116,636.6192488},
            new double[]{0.288675135,0.816496581,1.885618083,4.30265273,6.964556734,9.924843201,31.59905458},
            new double[]{0.276670662,0.764892328,1.637744354,3.182446305,4.540702859,5.84090931,12.92397864},
            new double[]{0.270722295,0.740697084,1.533206274,2.776445105,3.746947388,4.604094871,8.610301581},
            new double[]{0.267180866,0.726686844,1.475884049,2.570581836,3.364929999,4.032142984,6.868826626},
            new double[]{0.264834533,0.717558196,1.439755747,2.446911851,3.142668403,3.707428021,5.958816179},
            new double[]{0.263166861,0.711141778,1.414923928,2.364624252,2.997951567,3.499483297,5.407882521},
            new double[]{0.261921097,0.706386613,1.39681531,2.306004135,2.896459448,3.355387331,5.041305433},
            new double[]{0.260955336,0.702722147,1.383028738,2.262157163,2.821437925,3.249835542,4.780912586},
            new double[]{0.260184829,0.699812061,1.372183641,2.228138852,2.763769458,3.169272673,4.586893859},
            new double[]{0.25955586,0.697445328,1.363430318,2.20098516,2.718079184,3.105806516,4.436979338},
            new double[]{0.259032746,0.695482866,1.356217334,2.17881283,2.680997993,3.054539589,4.317791284},
            new double[]{0.258590858,0.693829304,1.350171289,2.160368656,2.650308838,3.012275839,4.220831728},
            new double[]{0.258212654,0.69241707,1.345030374,2.144786688,2.624494068,2.976842734,4.140454113},
            new double[]{0.257885301,0.691196949,1.340605608,2.131449546,2.602480295,2.946712883,4.072765196},
            new double[]{0.257599195,0.690132254,1.336757167,2.119905299,2.583487185,2.920781622,4.014996327},
            new double[]{0.257347006,0.689195075,1.33337939,2.109815578,2.566933984,2.89823052,3.965126272},
            new double[]{0.257123043,0.688363806,1.330390944,2.10092204,2.55237963,2.878440473,3.921645825},
            new double[]{0.25692282,0.68762146,1.327728209,2.093024054,2.539483191,2.860934606,3.883405853},
            new double[]{0.256742754,0.686954496,1.325340707,2.085963447,2.527977003,2.84533971,3.849516275},
            new double[]{0.256579948,0.686351991,1.323187874,2.079613845,2.517648016,2.831359558,3.819277164},
            new double[]{0.256432034,0.685805032,1.321236742,2.073873068,2.508324553,2.818756061,3.792130672},
            new double[]{0.25629706,0.685306278,1.31946024,2.06865761,2.499866739,2.807335684,3.767626804},
            new double[]{0.256173398,0.684849627,1.317835934,2.063898562,2.492159473,2.796939505,3.745398619},
            new double[]{0.256059685,0.684429965,1.316345073,2.059538553,2.485107175,2.787435814,3.72514395},
            new double[]{0.255954766,0.684042973,1.314971864,2.055529439,2.478629824,2.778714533,3.706611743},
            new double[]{0.255857659,0.683684979,1.313702913,2.051830516,2.472659912,2.770682957,3.689591713},
            new double[]{0.255767523,0.683352843,1.312526782,2.048407142,2.467140098,2.763262455,3.673906401},
            new double[]{0.255683635,0.683043861,1.311433647,2.045229642,2.46202136,2.756385904,3.659405019},
            new double[]{0.255605365,0.682755693,1.310415025,2.042272456,2.457261542,2.749995654,3.645958635}
        }; //<df,{pi,...p7}>
        
        /// <summary>
        /// Gets the t-score. Used in place of z-score when... 
        /// (population's standard deviation is unknown) || ( 31 > sample size);
        /// </summary>
        /// <param name="df">degrees of freedom (n-1). number between 1 and 30</param>
        /// <param name="probability">the degree of certainty desired. i.e. 0.90 is 90% certainty with 10% probability
        /// that the conclusion is incorrect</param>
        /// <returns>the t-score for the specified percentages, or returns -1 if an invalid probability was given</returns>
        public double GetTScore(ushort df, double probability)
        {
            switch (1 - probability)
            {
                case (0.4): return tableTScore[df][0];
                case (0.25): return tableTScore[df][1];
                case (0.1): return tableTScore[df][2];
                case (0.025): return tableTScore[df][3];
                case (0.01): return tableTScore[df][4];
                case (0.005): return tableTScore[df][5];
                case (0.0005): return tableTScore[df][6];
                default: return -1;
            }
        }
    }
}
